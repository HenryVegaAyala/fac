function IniciarForm(){var o=getParameterByName("idproyecto");$("#hdIdProyecto").val(o),paginaConcepto=1,ListarConcepto("#gvDatos","1")}function LimpiarForm(){$("#hdIdPrimary").val("0"),$("#txtNombreConcepto").val(""),$("#txtTituloConcepto").val(""),$("#txtFormula").val(""),$("#ddlTipoConcepto").val($("#ddlTipoConceptoMainFilter").val()),$("#ddlTipoValor")[0].selectedIndex=0,$("#chkAscensor")[0].checked=!1,$("#chkFormula")[0].checked=!1,$("#chkEscalonable")[0].checked=!1,$("#chkConsumoAgua")[0].checked=!1,MostrarFormula(!1),MostrarEscalonable(!1),MostrarConsumoAgua(!1),MostrarAscensor(!1),ListarSubTipo("NA"),$("#txtCantidadCaracter").val("0"),setFormula("0","Fórmula"),$("#ScrFormula").html("")}function ListarSubTipo(o){var t="",e="",a=$("#ddlTipoConcepto").val();"00"==a||"03"==a?(e="00"==a?"ta_tipopropiedad":"ta_tipogasto",t=$("#ddlTipoConcepto").val()):(e="",t="0"),$.ajax({url:"services/tabla/tabla-search.php",type:"GET",dataType:"json",data:{tipobusqueda:"REFERENCIA",campo:e,codigoreferencia:t}}).done(function(t){var e=0,a=0,n="",c="";if(a=t.length,a>0)for(;e<a;)c=t[e].ta_codigo==o?' selected="selected"':"",n+="<option"+c+' value="'+t[e].ta_codigo+'">'+t[e].ta_denominacion+"</option>",++e;else n='<option value="0">NINGUNO</option>';$("#ddlSubTipoConcepto").html(n)}).fail(function(o){console.log(o)}).always(function(){console.log("complete")})}function ListarConcepto(o,t){var e=o+" .items-area",a="",n="",c=$("#hdIdPrimary").val();precargaExp(o,!0),"#gvDatos"==o?(a="1",n=$("#txtSearch").val(),tipoconcepto=$("#ddlTipoConceptoMainFilter").val()):(a="2",n=$("#txtSearchConceptoFormula").val(),tipoconcepto=$("#ddlTipoConceptoFormula").val(),$('#ScrFormula .item-formula[data-idconcepto!="0"]').length>0&&(c+=","+$.map($('#ScrFormula .item-formula[data-idconcepto!="0"]'),function(o,t){return o.getAttribute("data-idconcepto")}).join(","))),$.ajax({url:"services/concepto/concepto-search.php",type:"GET",dataType:"json",data:{tipobusqueda:a,idproyecto:$("#hdIdProyecto").val(),id:c,criterio:n,tipoconcepto:tipoconcepto,pagina:t}}).done(function(a){var n=0,c=0,l="";if(c=a.length,c>0){for(;n<c;)iditem=a[n].tm_idconcepto,l+='<a href="#" class="list dato without-foto bg-gray-glass bg-cyan g200" data-idconcepto="'+iditem+'" data-formula="'+a[n].tm_definicion_formula+'" data-tipovalor="concepto">',l+='<input name="chkItem[]" type="checkbox" class="oculto" value="'+iditem+'" />',l+='<div class="list-content pos-rel">',l+='<div class="data">',l+='<main><p class="fg-white"><span class="codigo float-left">'+a[n].tm_idconcepto+' -&nbsp;</span><span class="descripcion float-left">'+a[n].tm_descripcionconcepto+"</span></p>",l+="</main></div></div>","1"==a[n].tm_esformula&&(l+='<span class="place-top-right bg-emerald margin10"><h5 class="fg-white padding10 no-margin text-center"><i class="icon-calculate"></i></h5></span>'),l+='<div class="place-bottom-left fg-white">',l+='<div class="tag-descrip bg-darkTeal">TIPO: '+a[n].nomtipoconcepto+"</div>",l+='<div class="tag-descrip bg-emerald">TIPO VALOR: '+a[n].nomtipovalor+"</div>",l+="</div>",l+="</a>",++n;"#gvDatos"==o?(paginaConcepto+=1,$("#hdPageConcepto").val(paginaConcepto)):(pageConceptoFormula+=1,$("#hdPageConceptoFormula").val(pageConceptoFormula)),"1"==t?$(e).html(l):$(e).append(l)}else"1"==t&&$(e).html("<h2>No hay datos.</h2>");precargaExp(o,!1)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}function GoToEdit(){var o=$("#gvDatos .list.selected"),t="0";o.length>0&&(t=o.attr("data-idconcepto"),$.ajax({url:"services/concepto/concepto-search.php",type:"GET",dataType:"json",cache:!1,data:{tipo:"ID",id:t},success:function(o){var e=0,a="0",n=!1,c=!1,l=!1,r=!1,i=!1,s="",d="0";e=o.length,e>0&&(c="1"==o[0].tm_esformula,n="1"==o[0].tm_ascensor,l="1"==o[0].tm_escalonable,r="1"==o[0].tm_essaldoanterior,i="1"==o[0].tm_esconsumoagua,s=o[0].ta_tipoconcepto,$("#hdIdPrimary").val(t),$("#ddlTipoConcepto").val(s),$("#chkAscensor")[0].checked=n,$("#chkFormula")[0].checked=c,$("#chkEscalonable")[0].checked=l,$("#chkSaldoAnterior")[0].checked=r,$("#chkConsumoAgua")[0].checked=i,$("#txtNombreConcepto").val(o[0].tm_descripcionconcepto),$("#txtTituloConcepto").val(o[0].tm_tituloconcepto),$("#ddlTipoValor").val(o[0].ta_tipovalor),setProyecto(o[0].tm_idproyecto,o[0].nombreproyecto),a="00"==o[0].ta_tipovalor?o[0].tm_numerocaracteres:o[0].tm_numerodecimales,MostrarFormula(c),MostrarEscalonable(l),MostrarAscensor(n),MostrarSaldoAnterior(r),MostrarConsumoAgua(i),$("#txtCantidadCaracter").val(a),"00"==s&&(d=o[0].ta_subtipoconcepto),c?($("#txtFormula").val(o[0].tm_definicion_formula),setFormula("1",o[0].tm_definicion_formula),$("#ScrFormula").html(o[0].tm_html_formula)):($("#txtFormula").val(""),setFormula("0","Fórmula"),$("#ScrFormula").html("")),l?setEscalonable("1","Valores escalonables ingresados"):setEscalonable("0","Valores escalonables sin ingresar"),ListarSubTipo(d),ListarConceptoEscalonable())},error:function(o){console.log(o)}})),openCustomModal("#modalRegistroConcepto")}function EliminarConcepto(){indexList=0,elemsSelected=$("#gvDatos .selected").toArray(),EliminarItemConcepto(elemsSelected[0])}function EliminarItemConcepto(o){var t=new FormData,e="0";e=o.getAttribute("data-idconcepto"),t.append("btnEliminar","btnEliminar"),t.append("hdIdConcepto",e),$.ajax({url:"services/concepto/concepto-post.php",type:"POST",dataType:"json",data:t,cache:!1,contentType:!1,processData:!1,success:function(t){var a,n,c=0,l="",r=0;if(n=$(o),r=n.height(),"0"==t.rpta)if(l="El concepto "+e+": "+$(o).find(".descripcion").text(),"ERROR-FORMULA"==t.contenidomsje?l+=" es parte de una formula.":"ERROR-COBRANZA"==t.contenidomsje?l+=" se ha usado en el m&oacute;dulo de cobranza.":"ERROR-FACTURACION"==t.contenidomsje?l+=" se ha usado en el m&oacute;dulo de facturaci&oacute;n.":"ERROR-GASTO"==t.contenidomsje?l+=" se ha usado en el m&oacute;dulo de registro de gastos.":"ERROR-PRESUPUESTO"==t.contenidomsje?l+=" se ha usado en el m&oacute;dulo de presupuesto.":"ERROR-PROPIEDAD"==t.contenidomsje&&(l+=" es un concepto relacionado a alguna propiedad."),"ERROR-FACTURACION"==t.contenidomsje){var i=confirm("El concepto "+e+": "+$(o).find(".descripcion").text()+" ya está vinculado con varias facturas ¿Desea eliminarlo de todas formas?");if(i){var s=new FormData;s.append("btnEliminarConFactura","btnEliminarConFactura"),s.append("hdIdConcepto",e),$.ajax({url:"services/concepto/concepto-post.php",type:"POST",dataType:"json",data:s,cache:!1,contentType:!1,processData:!1,success:function(t){MessageBox("Concepto "+$(o).find(".descripcion").text()+" eliminado","La eliminación de este concepto se realizó satisfactoriamente","[Aceptar]",function(){n.fadeOut(400,function(){$(this).remove()})})},error:function(o){console.log(o)}})}}else MessageBox(t.titulomsje,l,"[Aceptar]",function(){});else++indexList,a=$("#gvDatos .listview"),c=a.scrollTop(),n.fadeOut(400,function(){$(this).remove()}),indexList<=elemsSelected.length-1?(c+=r+18,a.animate({scrollTop:c},400,function(){EliminarItemConcepto(elemsSelected[indexList])})):MessageBox(t.titulomsje,t.contenidomsje,"[Aceptar]",function(){$("#btnLimpiarSeleccion").trigger("click")})},error:function(o){console.log(o)}})}function DetalleEscalonable(o,t,e,a,n){this.indexdetalle=o,this.valorinicial=t,this.valorfinal=e,this.valorescala=a,this.textointervalo=n}function EnvioAdminDatos(o){var t,e,a,n="",c=new FormData,l=0,r=[],i=0,s="",d=0,p=0,u=0,m="";if(t=$("#modalRegistroConcepto :input").serializeArray(),n=$.map($('#ScrFormula .item-formula[data-idconcepto!="0"]'),function(o,t){return o.getAttribute("data-idconcepto")}).join(","),a=$("#tableEscalonable .ibody table"),e=a[0],l=e.rows.length,l>0){for(;i<l;){d=e.rows[i].cells[0].childNodes[0].value,p=e.rows[i].cells[1].childNodes[0].value,u=e.rows[i].cells[2].childNodes[0].value,m=e.rows[i].cells[3].childNodes[0].value;var v=new DetalleEscalonable(i,d,p,u,m);r.push(v),++i}s=JSON.stringify(r)}c.append("btnGuardar","btnGuardar"),c.append("hdIdPrimary",$("#hdIdPrimary").val()),c.append("hdIdProyecto",$("#hdIdProyecto").val()),c.append("htmlFormula",$("#ScrFormula").html()),c.append("txtFormula",$("#txtFormula").val()),c.append("chkItemConcepto",n),c.append("detalleEscalonable",s),$.each(t,function(o,t){c.append(t.name,t.value)}),$.ajax({type:"POST",url:"services/concepto/concepto-post.php",contentType:!1,processData:!1,cache:!1,dataType:"json",data:c,success:function(o){MessageBox(o.titulomsje,o.contenidomsje,"[Aceptar]",function(){"0"!=o.rpta&&(paginaConcepto=1,clearOnlyListSelection(),$("#txtSearch").val(""),ListarConcepto("#gvDatos","1"),closeCustomModal("#modalRegistroConcepto"),$("#hdIdPrimary").val("0"),$("#btnNuevo, #btnUploadExcel").removeClass("oculto"),$("#btnLimpiarSeleccion, #btnEditar, #btnEliminar").addClass("oculto"))})},error:function(o){console.log(o)}})}function GuardarDatos(){$("#form1").submit()}function MostrarFormula(o){$("#helperFormula").text(o?"SI":"NO"),o?($("#campoEscalonable").hide(400),$("#pnlInfoFormula").show(400,function(){})):($("#campoEscalonable").show(400),$("#pnlInfoFormula").hide(400,function(){}))}function MostrarAscensor(o){$("#helperAscensor").text(o?"SI":"NO")}function MostrarSaldoAnterior(o){$("#helperSaldoAnterior").text(o?"SI":"NO")}function MostrarConsumoAgua(o){$("#helperConsumoAgua").text(o?"SI":"NO")}function MostrarEscalonable(o){$("#helperEscalonable").text(o?"SI":"NO"),o?$("#pnlInfoEscalonable").show(400,function(){}):$("#pnlInfoEscalonable").hide(400,function(){})}function ConstruirFormula(o){var t,e="",a="",n="",c="",l="",r="0";t=$(o),a=t.attr("data-tipovalor"),"concepto"==a?(r=t.attr("data-idconcepto"),c="["+r+"]",l=t.attr("data-formula")):c=t.text(),e+=$("#ScrFormula").html(),e+='<div data-idconcepto="'+r+'" data-formula="'+l+'"'+n+' class="item-formula float-left">',e+='<h5 class="fg-white no-margin">',e+=c,e+="</h5>",e+="</div>",$("#ScrFormula").html(e),$("#txtFormula").val($("#txtFormula").val()+c)}function setFormula(o,t){$("#pnlInfoFormula").attr("data-editado",o),$("#pnlInfoFormula .descripcion").text(t)}function setEscalonable(o,t){$("#pnlInfoEscalonable").attr("data-editado",o),$("#pnlInfoEscalonable .descripcion").text(t)}function AgregarRowEscalonable(){var o="";o+="<tr>",o+='<td><input type="text" name="txtValorInicial[]" class="inputTextInTable valorInicial text-right" value="0" /></td>',o+='<td><input type="text" name="txtValorFinal[]" class="inputTextInTable valorFinal text-right" value="0" /></td>',o+='<td><input type="text" name="txtValorEscala[]" class="inputTextInTable valorEscala text-right" value="0" /></td>',o+='<td><input type="text" name="txtValorIntervaloEnTexto[]" class="inputTextInTable valorIntervaloEnTexto" /></td>',o+="</tr>",$("#tableEscalonable tbody").append(o)}function QuitarRowEscalonable(){$("#tableEscalonable tbody tr.selected").fadeOut(400,function(){$(this).remove()}),$("#btnAddRowEscalonable").removeClass("remove").addClass("add")}function ShowPanelProyecto(){$("#pnlProyecto").fadeIn(400,function(){paginaProyecto=1,$("#hdPageProyecto").val("1"),ListarProyectos("1")})}function RegistroPorDefecto(){$.ajax({url:"services/condominio/condominio-search.php",type:"GET",dataType:"json",data:{tipo:"defecto-sinproceso"},success:function(o){var t=0,e="0",a="";t=o.length,t>0&&(e=o[0].idproyecto,a=o[0].nombreproyecto,setProyecto(e,a))},error:function(o){console.log(o)}})}function setProyecto(o,t){$("#hdIdProyecto").val(o),$("#pnlFiltroProyecto").attr("data-idproyecto",o),$("#pnlFiltroProyecto .info .descripcion").text(t),$("#pnlInfoProyecto").attr("data-idproyecto",o),$("#pnlInfoProyecto .info .descripcion").text(t),$("#pnlProyecto").fadeOut("400",function(){$("#btnLimpiarSeleccion").trigger("click"),paginaConcepto=1,ListarConcepto("#gvDatos","1")})}function ListarProyectos(o){var t="#gvProyecto .items-area";precargaExp("#gvProyecto",!0),$.ajax({type:"GET",url:"services/condominio/condominio-search.php",cache:!1,dataType:"json",data:"tipo=1&criterio="+$("#txtSearchProyecto").val()+"&pagina="+o,success:function(e){var a=0,n=0,c="";if(n=e.length,n>0){for(;a<n;)iditem=e[a].idproyecto,c+='<a href="#" class="list dato without-foto bg-gray-glass bg-cyan g200" data-idproyecto="'+iditem+'" data-tipoproyecto="'+e[a].tipoproyecto+'" data-nombre="'+e[a].nombreproyecto+'">',c+='<input name="chkItem[]" type="checkbox" class="oculto" value="'+iditem+'" />',c+='<div class="list-content pos-rel">',c+='<div class="data">',c+='<main><p class="fg-white"><span class="descripcion">'+e[a].nombreproyecto+"</span></p>",c+="</main></div></div>",c+="</a>",++a;paginaProyecto+=1,$("#hdPageProyecto").val(paginaProyecto),"1"==o?$(t).html(c):$(t).append(c)}else"1"==o&&$(t).html("<h2>No hay datos.</h2>");precargaExp("#gvProyecto",!1)}})}function ListarConceptoEscalonable(){precargaExp("#tableEscalonable",!0),$.ajax({url:"services/concepto/concepto-search.php",type:"GET",dataType:"json",data:{tipo:"ESCALONABLE",tipobusqueda:"1",id:$("#hdIdPrimary").val()},success:function(o){var t=0,e=0,a="";if(e=o.length,e>0)for(;t<e;)a+="<tr>",a+='<td><input type="text" name="txtValorInicial[]" class="inputTextInTable valorInicial text-right" value="'+o[t].td_valor_inicial+'"/></td>',a+='<td><input type="text" name="txtValorFinal[]" class="inputTextInTable valorFinal text-right" value="'+o[t].td_valor_final+'"/></td>',a+='<td><input type="text" name="txtValorEscala[]" class="inputTextInTable valorEscala text-right" value="'+o[t].td_valorintervalo+'"/></td>',a+='<td><input type="text" name="txtValorIntervaloEnTexto[]" class="inputTextInTable valorIntervaloEnTexto" value="'+o[t].td_textointervalo+'"/></td>',a+="</tr>",++t;$("#tableEscalonable .ibody tbody").html(a),precargaExp("#tableEscalonable",!1)}})}$(function(){$("#txtSearch").keydown(function(o){if(o.keyCode==$.ui.keyCode.ENTER)return $("#btnSearch").trigger("click"),!1}).keypress(function(o){if(o.keyCode==$.ui.keyCode.ENTER)return!1}),$("#btnSearch").on("click",function(o){o.preventDefault(),$("#btnLimpiarSeleccion").trigger("click"),paginaConcepto=1,ListarConcepto("#gvDatos","1")}),$("#txtSearchConceptoFormula").keydown(function(o){if(o.keyCode==$.ui.keyCode.ENTER)return $("#btnSearchConceptoFormula").trigger("click"),!1}).keypress(function(o){if(o.keyCode==$.ui.keyCode.ENTER)return!1}),$("#txtSearchProyecto").keydown(function(o){if(o.keyCode==$.ui.keyCode.ENTER)return $("#btnSearchProyecto").trigger("click"),!1}).keypress(function(o){if(o.keyCode==$.ui.keyCode.ENTER)return!1}),$("#btnSearchProyecto").on("click",function(o){o.preventDefault(),ListarProyectos("1")}),$("#btnSearchConceptoFormula").on("click",function(o){o.preventDefault(),pageConceptoFormula=1,ListarConcepto("#gvConcepto","1")}),$("#gvDatos").on("click",".dato",function(o){o.preventDefault();var t=$(this).find("input:checkbox");$(this).hasClass("selected")?($(this).removeClass("selected"),t.removeAttr("checked"),0==$("#gvDatos .dato.selected").length?($("#btnNuevo, #btnUploadExcel, #btnSelectAll").removeClass("oculto"),$("#btnLimpiarSeleccion, #btnEditar, #btnDetalleFromList, #btnEliminar").addClass("oculto")):1==$("#gvDatos .dato.selected").length&&$("#btnLimpiarSeleccion, #btnEditar, #btnDetalleFromList").removeClass("oculto")):($(this).addClass("selected"),t.attr("checked",""),$("#btnNuevo, #btnUploadExcel").addClass("oculto"),$("#btnLimpiarSeleccion, #btnEliminar").removeClass("oculto"),1==$("#gvDatos .dato.selected").length?$("#btnEditar, #btnDetalleFromList").removeClass("oculto"):$("#btnEditar, #btnDetalleFromList").addClass("oculto"))}),$("#panelFormula").on("click",'button[data-tipovalor!="edicion"]',function(o){o.preventDefault(),ConstruirFormula(this)}),$("#txtNombreConcepto").on("keyup",function(o){$("#txtTituloConcepto").val(this.value)}),MostrarFormula(!1),MostrarEscalonable(!1),MostrarAscensor(!1),MostrarSaldoAnterior(!1),MostrarConsumoAgua(!1),$("#chkAscensor").on("click",function(o){var t=this.checked;MostrarAscensor(t)}),$("#chkFormula").on("click",function(o){var t=this.checked;MostrarFormula(t)}),$("#chkEscalonable").on("click",function(o){var t=this.checked;MostrarEscalonable(t)}),$("#chkSaldoAnterior").on("click",function(o){var t=this.checked;MostrarSaldoAnterior(t)}),$("#chkConsumoAgua").on("click",function(o){var t=this.checked;MostrarConsumoAgua(t)}),$("#pnlInfoFormula").on("click",function(o){o.preventDefault(),openModalCallBack("#modalFormula",function(){pageConceptoFormula=1,$("#txtSearchConceptoFormula").val(""),ListarConcepto("#gvConcepto","1")})}),$("#pnlInfoAscensor").on("click",function(o){o.preventDefault(),openCustomModal("#modalAscensor")}),$("#pnlInfoEscalonable").on("click",function(o){o.preventDefault(),openCustomModal("#modalEscalonable")}),$("#pnlInfoProyecto").add("#pnlFiltroProyecto").on("click",function(o){o.preventDefault(),ShowPanelProyecto()}),$("#btnHideProyecto").on("click",function(o){o.preventDefault(),$("#pnlProyecto").fadeOut(400,function(){})}),$("#btnNuevo, #btnEditar").on("click",function(o){o.preventDefault(),LimpiarForm(),GoToEdit()}),$("#form1").validate({lang:"es",showErrors:showErrorsInValidate,submitHandler:EnvioAdminDatos}),$("#btnGuardar").on("click",function(o){o.preventDefault(),GuardarDatos()}),$("#btnLimpiarSeleccion").on("click",function(o){o.preventDefault(),$("#gvDatos .dato.selected").removeClass("selected"),$("#gvDatos input:checkbox:checked").removeAttr("checked"),$("#btnNuevo, #btnUploadExcel, #btnSelectAll").removeClass("oculto"),$("#btnLimpiarSeleccion, #btnEditar, #btnEliminar").addClass("oculto")}),$("#btnSelectAll").on("click",function(o){o.preventDefault(),$(this).addClass("oculto"),$("#gvDatos .dato").addClass("selected"),$("#gvDatos input:checkbox").attr("checked",""),$("#btnNuevo, #btnUploadExcel, #btnEditar").addClass("oculto"),$("#btnLimpiarSeleccion, #btnEliminar").removeClass("oculto")}),$("#gvDatos > .items-area").on("scroll",function(){var o=0;$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&(o=Number($("#hdPageConcepto").val()),ListarConcepto("#gvDatos",o))}),$("#gvConcepto > .items-area").on("scroll",function(){var o=0;$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&(o=Number($("#hdPageConceptoFormula").val()),ListarConcepto("#gvConcepto",o))}),$("#gvConcepto").liveDraggable({containment:"document",distance:10,helper:"clone",position:"absolute",appendTo:"body",opacity:.55,zIndex:1e4},"a"),$("#gvConcepto").on("dblclick","a",function(o){o.preventDefault(),ConstruirFormula(this)}),$("#ScrFormula").droppable({accept:"#gvConcepto a",drop:function(o,t){var e=t.draggable;ConstruirFormula(e)}}),$("#btnBksp").on("click",function(o){o.preventDefault();var t,e="",a="";t=$("#ScrFormula .item-formula:last-child"),e=$("#txtFormula").val(),"0"==t.attr("data-idconcepto")?$("#txtFormula").val(e.substring(0,e.length-1)):(a=e.substring(e.lastIndexOf("[")+1,e.lastIndexOf("]")),$("#txtFormula").val(e.replace("["+a+"]",""))),t.remove()}),$("#btnAplicarFormula").on("click",function(o){o.preventDefault(),setFormula("1",$("#txtFormula").val()),closeCustomModal("#modalFormula")}),$("#btnAplicarEscalonable").on("click",function(o){o.preventDefault(),setEscalonable("1","Valores escalonables ingresados"),closeCustomModal("#modalEscalonable")}),$("#ddlTipoConcepto").on("change",function(o){o.preventDefault();var t="0";"00"==$(this).val()&&(t="NA"),ListarSubTipo(t)}),$("#ddlTipoValor").on("change",function(o){o.preventDefault();var t="";t=$(this).val(),"02"==t?$("#campoCaracter").hide(400):("00"==t?valor="Cantidad de caracteres":"01"==t&&(valor="Cantidad de decimales"),$("#campoCaracter").show(400),$("#lblCantidadCaracter").text(valor))}),$("#btnAddRowEscalonable").on("click",function(o){o.preventDefault(),$(this).hasClass("add")?AgregarRowEscalonable():QuitarRowEscalonable()}),$("#tableEscalonable tbody").on("click","tr",function(o){o.preventDefault(),$(this).hasClass("selected")?($(this).removeClass("selected"),0==$("#tableEscalonable tbody tr.selected").length&&$("#btnAddRowEscalonable").removeClass("remove").addClass("add")):($(this).addClass("selected"),$("#btnAddRowEscalonable").removeClass("add").addClass("remove"))}),$("#tableEscalonable tbody").on("click","input",function(o){return o.preventDefault(),!1}),$("#gvProyecto > .items-area").on("scroll",function(){var o=0;$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&(o=Number($("#hdPageProyecto").val()),ListarProyectos(o))}),$("#gvProyecto .items-area").on("click",".dato",function(o){o.preventDefault();var t="0",e="";t=this.getAttribute("data-idproyecto"),e=this.getAttribute("data-nombre"),setProyecto(t,e)}),$("#btnEliminar").on("click",function(o){o.preventDefault(),confirma=confirm("¿Desea eliminar los elementos seleccionados?"),confirma&&EliminarConcepto()}),$("#ddlTipoConceptoMainFilter").on("change",function(o){o.preventDefault(),paginaConcepto=1,ListarConcepto("#gvDatos","1")}),$("#ddlTipoConceptoFormula").on("change",function(o){o.preventDefault(),pageConceptoFormula=1,ListarConcepto("#gvConcepto","1")})});var indexList=0,elemsSelected,paginaConcepto=1,pageConceptoFormula=1,paginaProyecto=1,arrMeses=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];