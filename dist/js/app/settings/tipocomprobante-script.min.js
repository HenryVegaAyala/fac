function LimpiarForm(){$("#hdIdPrimary").val("0"),$("#txtNombre").val("").focus()}function addValidForm(){$("#txtNombre").rules("add",{required:!0,maxlength:150})}function GuardarDatos(){$("#form1").submit()}function limpiarSeleccionados(){$(".listview .selected").removeClass("selected"),$(".listview .list input:checkbox").removeAttr("checked")}function MostrarDatos(){$.ajax({url:"services/tipocomprobante/tipocomprobante-search.php",type:"GET",dataType:"json",data:{tipobusqueda:"1",criterio:""}}).done(function(o){var t=0,e=0,a="";if(e=o.length,e>0)for(t=0;t<e;t++)a+='<a href="#" class="list dato" data-id="'+o[t].idtipodocumento+'">',a+='<input name="chkItem[]" type="checkbox" class="oculto" value="'+o[t].idtipodocumento+'" />',a+='<div class="list-content">',a+='<div class="data">',a+="<h2>"+o[t].descripciondocumento+"</h2>",a+="</div></div></a>";$(".listview").html(a)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}function Guardar(o){$.ajax({type:"POST",url:"services/tipocomprobante/tipocomprobante-post.php",cache:!1,dataType:"json",data:$(o).serialize()+"&btnGuardar=btnGuardar"}).done(function(o){MessageBox(o.titulomsje,o.contenidomsje,"[Aceptar]",function(){Number(o.rpta)>0&&(resetForm("form1"),closeCustomModal("#modalRegistro"),$("#btnEditar, #btnEliminar, #btnLimpiarSeleccion").addClass("oculto"),$("#btnNuevo").removeClass("oculto"),limpiarSeleccionados(),MostrarDatos())})}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}function Eliminar(){var o=$("#form1 input[type!=text]").serialize()+"&btnEliminar=btnEliminar";precargaExp(".page-region",!0),$.ajax({type:"POST",url:"services/tipocomprobante/tipocomprobante-post.php",cache:!1,dataType:"json",data:o,success:function(o){MessageBox(o.titulomsje,o.contenidomsje,"[Aceptar]",function(){Number(o.rpta)>0&&(closeCustomModal("#modalRegistro"),$("#btnEditar, #btnEliminar, #btnLimpiarSeleccion").addClass("oculto"),$("#btnNuevo").removeClass("oculto"),limpiarSeleccionados(),MostrarDatos())})}})}function GetDataById(o){$.ajax({url:"services/tipocomprobante/tipocomprobante-search.php",type:"GET",dataType:"json",data:{tipobusqueda:"2",id:o}}).done(function(o){$("#hdIdPrimary").val(o[0].idtipodocumento),$("#txtNombre").val(o[0].descripciondocumento)}).fail(function(){console.log("error")}).always(function(){console.log("complete")})}$(function(){$("#btnGuardar").on("click",function(o){o.preventDefault(),GuardarDatos()}),$("#btnLimpiar").on("click",function(o){o.preventDefault(),LimpiarForm()}),$("#btnEliminar").on("click",function(){return Eliminar(),!1}),$("#txtNombre").on("keydown",function(o){if(o.keyCode==$.ui.keyCode.ENTER)return $("#btnGuardar").focus(),!1}),$("#btnLimpiarSeleccion").on("click",function(o){o.preventDefault(),limpiarSeleccionados(),$("#btnEditar, #btnEliminar, #btnLimpiarSeleccion").addClass("oculto"),$("#btnNuevo").removeClass("oculto")}),$("#btnEditar").on("click",function(o){var t=$(".listview a.list.selected").attr("data-id");o.preventDefault(),openCustomModal("#modalRegistro"),GetDataById(t)}),$("#btnNuevo").on("click",function(o){o.preventDefault(),LimpiarForm(),openCustomModal("#modalRegistro")}),$("#form1").validate({lang:"es",showErrors:showErrorsInValidate,submitHandler:Guardar}),$("#gvDatos").on("click",".dato",function(o){o.preventDefault();var t=$(this).find("input:checkbox");$(this).hasClass("selected")?($(this).removeClass("selected"),t.removeAttr("checked"),0==$("#gvDatos .dato.selected").length?($("#btnNuevo, #btnUploadExcel, #btnSelectAll").removeClass("oculto"),$("#btnLimpiarSeleccion, #btnEditar, #btnEliminar").addClass("oculto")):1==$("#gvDatos .dato.selected").length&&$("#btnLimpiarSeleccion, #btnEditar").removeClass("oculto")):($(this).addClass("selected"),t.attr("checked",""),$("#btnNuevo, #btnUploadExcel").addClass("oculto"),$("#btnLimpiarSeleccion, #btnEliminar").removeClass("oculto"),1==$("#gvDatos .dato.selected").length?$("#btnEditar").removeClass("oculto"):$("#btnEditar").addClass("oculto"))}),addValidForm(),MostrarDatos()});