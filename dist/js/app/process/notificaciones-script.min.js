function setProyecto(t,a){$("#hdIdProyecto").val(t),$("#pnlInfoProyecto").attr("data-idproyecto",t),$("#pnlInfoProyecto .info .descripcion").text(a),$("#pnlDatosFiltro").fadeOut("400",function(){})}function ListarProyectos(t){var a="#gvFiltro",o=a+" .gridview";precargaExp(a,!0),$(o).addClass("items-area").addClass("listview").removeClass("card-area"),$.ajax({type:"GET",url:"services/condominio/condominio-search.php",cache:!1,dataType:"json",data:"criterio="+$("#txtSearchFiltro").val()+"&pagina="+t,success:function(a){var e=0,i=0,n="";if(i=a.length,i>0){for(;i>e;)iditem=a[e].idproyecto,n+='<a href="#" class="list dato without-foto bg-gray-glass bg-cyan g200" data-idproyecto="'+iditem+'" data-tipoproyecto="'+a[e].tipoproyecto+'" data-nombre="'+a[e].nombreproyecto+'">',n+='<input name="chkItem[]" type="checkbox" class="oculto" value="'+iditem+'" />',n+='<div class="list-content pos-rel">',n+='<span class="ubigeotag fg-white bg-darkCyan place-top-right padding5 margin5">UBIGEO: '+a[e].ubigeo+"</span>",n+='<div class="data">',n+='<main><p class="fg-white"><span class="descripcion">'+a[e].nombreproyecto+'</span></p><p class="fg-white">Direcci&oacute;n: <span class="direccion">'+a[e].direccionproyecto+"</span></p>",n+="</main></div></div>",n+="</a>",++e;paginaFiltro+=1,$("#hdPage").val(paginaFiltro),"1"==t?$(o).html(n):$(o).append(n)}else"1"==t&&$(o).html("<h2>No hay datos.</h2>");precargaExp("#gvFiltro",!1)}})}function ListarModelos(t){var a="#gvDatos",o=a+" .gridview";precargaExp(a,!0),$.ajax({type:"GET",url:"services/modelocarta/modelocarta-search.php",cache:!1,dataType:"json",data:"criterio="+$("#txtSearchFiltro").val()+"&pagina="+t,success:function(e){var i=0,n=0,l="";if(n=e.length,n>0){for(;n>i;)iditem=e[i].idmodelocarta,l+='<div class="tile double dato without-foto bg-gray-glass bg-cyan g200" data-idmodelocarta="'+iditem+'" data-nombre="'+e[i].nombre+'">',l+='<div class="tile-content">',l+='<input name="chkItem[]" type="checkbox" class="oculto" value="'+iditem+'" />',l+='<p class="fg-white padding10"><span class="descripcion">'+e[i].nombre+"</span></p>",l+="</div>",l+="</div>",++i;paginaModelo+=1,$("#hdPageModelo").val(paginaModelo),"1"==t?$(o).html(l):$(o).append(l)}else"1"==t&&$(o).html("<h2>No hay datos.</h2>");precargaExp(a,!1)}})}function EliminarDatos(){var t,a=new FormData;t=$("#gvDatos .tile-area input:checkbox:checked").serializeArray(),a.append("btnEliminar","btnEliminar"),$.each(t,function(t,o){a.append(o.name,o.value)}),$.ajax({type:"POST",url:"services/modelocarta/modelocarta-post.php",contentType:!1,processData:!1,cache:!1,dataType:"json",data:a,success:function(t){Number(t.rpta)>0&&MessageBox(t.titulomsje,t.contenidomsje,"[Aceptar]",function(){$(".tile-area .dato.selected").remove(),$("#btnNuevo, #btnSelectAll").removeClass("oculto"),$("#btnLimpiarSeleccion, #btnEditar, #btnEliminar").addClass("oculto"),0==$(".tile-area .dato").length&&($("#txtSearch").val(""),paginaModelo=1,ListarModelos("1"))})},error:function(t){console.log(t)}})}$(function(){ListarModelos("1"),$("#gvDatos").on("click",".dato",function(t){t.preventDefault();var a=$(this).find("input:checkbox");$(this).hasClass("selected")?($(this).removeClass("selected"),a.removeAttr("checked"),0==$("#gvDatos .dato.selected").length?($("#btnNuevo, #btnUploadExcel").removeClass("oculto"),$("#btnLimpiarSeleccion, #btnEditar, #btnEliminar").addClass("oculto")):1==$("#gvDatos .dato.selected").length&&$("#btnLimpiarSeleccion, #btnEditar").removeClass("oculto")):($(this).addClass("selected"),a.attr("checked",""),$("#btnNuevo, #btnUploadExcel").addClass("oculto"),$("#btnLimpiarSeleccion, #btnEliminar").removeClass("oculto"),1==$("#gvDatos .dato.selected").length?$("#btnEditar").removeClass("oculto"):$("#btnEditar").addClass("oculto"))}),$("#pnlInfoProyecto").add("#pnlInfoProyecto").on("click",function(t){t.preventDefault();var a,o="",e="";a=this,o=a.getAttribute("data-tipofiltro"),e=a.getAttribute("data-hint"),paginaFiltro=1,"proyecto"==o&&($("#pnlDatosFiltro").removeClass("with-appbar"),$("#pnlDatosFiltro .appbar").addClass("oculto"),ListarProyectos("1")),$("#pnlDatosFiltro").attr("data-tipofiltro",o),$("#txtTituloFiltro").text(e),$("#pnlDatosFiltro").fadeIn(400,function(){})}),$("#btnBackToNotif").on("click",function(t){t.preventDefault(),$("#pnlModelo").fadeOut(400,function(){$("#pnlListado").fadeIn(400,function(){})})}),$("#btnModeloEmail").on("click",function(t){t.preventDefault(),$("#pnlListado").fadeOut(400,function(){$("#pnlModelo").fadeIn(400,function(){})})}),$("#btnNuevo, #btnEditar").on("click",function(t){t.preventDefault();var a="0";a=$("#gvDatos .tile.selected").attr("data-idmodelocarta"),openModalCallBack("#modalModelo",function(){$("#ifrModelo").attr("src","index.php?pag=admin&subpag=modelos&idmodelocarta="+(null==a?"0":a))})}),$("#btnEliminar").on("click",function(){return EliminarDatos(),!1}),$("#btnLimpiarSeleccion").on("click",function(t){t.preventDefault(),$("#gvDatos .dato.selected").removeClass("selected"),$("#gvDatos input:checkbox:checked").removeAttr("checked"),$("#btnNuevo").removeClass("oculto"),$("#btnLimpiarSeleccion, #btnEditar, #btnEliminar").addClass("oculto")}),$("#btnHideFiltro").on("click",function(t){t.preventDefault(),$("#pnlDatosFiltro").fadeOut(400,function(){})}),$("#gvFiltro > .items-area").on("scroll",function(){var t=0,a="";$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&(t=Number($("#hdPage").val()),a=$("#pnlDatosFiltro").attr("data-tipofiltro"),"proyecto"==a&&ListarProyectos(t))}),$("#gvFiltro").on("click",".dato",function(t){t.preventDefault();var a,o="0",e="",i="";a=document.getElementById("pnlDatosFiltro"),i=a.getAttribute("data-tipofiltro"),"proyecto"==i&&(o=this.getAttribute("data-idproyecto"),e=this.getAttribute("data-nombre"),setProyecto(o,e))})});var paginaModelo=1;