function verDatos(){var o=new FormData;o.append("hdIdProyecto",$("#hdIdProyecto").val()),o.append("ddlAnhoIni",$("#ddlAnhoIni").val()),o.append("ddlMesIni",$("#ddlMesIni").val()),o.append("ddlAnhoFin",$("#ddlAnhoFin").val()),o.append("ddlMesFin",$("#ddlMesFin").val()),$.ajax({url:"services/reporteria/estadocuenta-post.php",type:"POST",dataType:"json",data:o,cache:!1,contentType:!1,processData:!1,success:function(o){$("#tableResumenProyecto thead tr").html(o.strcolumnasProyecto),$("#tableResumenProyecto tbody").html(o.strfilasProyecto),$("#tableResumenPropietario thead tr").html(o.strcolumnasPropietario),$("#tableResumenPropietario tbody").html(o.strfilasPropietario)},error:function(o){console.log(o)}})}function ShowPanelProyecto(){$("#pnlProyecto").fadeIn(400,function(){paginaProyecto=1,$("#hdPageProyecto").val("1"),ListarProyectos("1")})}function RegistroPorDefecto(){$.ajax({url:"services/condominio/condominio-search.php",type:"GET",dataType:"json",data:{tipo:"defecto-sinproceso"},success:function(o){var e=0,t="0",a="";e=o.length,e>0&&(t=o[0].idproyecto,a=o[0].nombreproyecto,setProyecto(t,a))},error:function(o){console.log(o)}})}function setProyecto(o,e){$("#hdIdProyecto").val(o),$("#pnlFiltroProyecto").attr("data-idproyecto",o),$("#pnlFiltroProyecto .info .descripcion").text(e),$("#pnlProyecto").fadeOut("400",function(){var o=new Date,e=o.getFullYear();ListarAnhoProceso(e)})}function ListarProyectos(o){var e="#gvProyecto .items-area";precargaExp("#gvProyecto",!0),$.ajax({type:"GET",url:"services/condominio/condominio-search.php",cache:!1,dataType:"json",data:"tipo=1&criterio="+$("#txtSearchProyecto").val()+"&pagina="+o,success:function(t){var a=0,r=0,n="";if(r=t.length,r>0){for(;r>a;)iditem=t[a].idproyecto,n+='<a href="#" class="list dato without-foto bg-gray-glass bg-cyan g200" data-idproyecto="'+iditem+'" data-tipoproyecto="'+t[a].tipoproyecto+'" data-nombre="'+t[a].nombreproyecto+'">',n+='<input name="chkItem[]" type="checkbox" class="oculto" value="'+iditem+'" />',n+='<div class="list-content pos-rel">',n+='<div class="data">',n+='<main><p class="fg-white"><span class="descripcion">'+t[a].nombreproyecto+"</span></p>",n+="</main></div></div>",n+="</a>",++a;paginaProyecto+=1,$("#hdPageProyecto").val(paginaProyecto),"1"==o?$(e).html(n):$(e).append(n)}else"1"==o&&$(e).html("<h2>No hay datos.</h2>");precargaExp("#gvProyecto",!1)}})}function ListarAnhoProceso(o){$.ajax({url:"services/proceso/proceso-search.php",type:"GET",dataType:"json",data:{tipobusqueda:"ANHO",idproyecto:$("#hdIdProyecto").val()},success:function(e){var t=0,a=0,r="",n="";if(a=e.length,a>0)for(;a>t;)n=o==e[t].per_ano?' selected="selected"':"",r+="<option"+n+' value="'+e[t].per_ano+'">'+e[t].per_ano+"</option>",++t;else r+='<option value="0">NO HAY PROCESOS RELACIONADOS CON EL PROYECTO SELECCIONADO</option>';$("#ddlAnhoIni").html(r),$("#ddlAnhoFin").html(r)},error:function(o){console.log(o)}})}$(window).load(function(){ajustarColumnas("#tableResumenProyecto"),ajustarColumnas("#tableResumenPropietario")}),$(function(){RegistroPorDefecto(),$("#pnlFiltroProyecto").on("click",function(o){o.preventDefault(),ShowPanelProyecto()}),$("#btnHideProyecto").on("click",function(o){o.preventDefault(),$("#pnlProyecto").fadeOut(400,function(){})}),$("#gvProyecto > .items-area").on("scroll",function(){var o=0;$(this).scrollTop()+$(this).innerHeight()>=$(this)[0].scrollHeight&&(o=Number($("#hdPageProyecto").val()),ListarProyectos(o))}),$("#gvProyecto .items-area").on("click",".dato",function(o){o.preventDefault();var e="0",t="";e=this.getAttribute("data-idproyecto"),t=this.getAttribute("data-nombre"),setProyecto(e,t)}),$("#btnBuscar").on("click",function(o){o.preventDefault(),verDatos()})});